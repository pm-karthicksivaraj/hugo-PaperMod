{{ define "main" }}
<div class="masonry-grid" id="masonry-container">
  <div class="grid-sizer"></div>  <!-- ADD THIS: Empty sizer for Masonry column width reference -->

  {{ range .Paginator.Pages }}  <!-- Your existing loop is fine -->
    <article class="masonry-card">
      <a href="{{ .RelPermalink }}">
        {{ with .Params.cover.image }}
          <img class="cover-image" src="{{ . }}" alt="{{ $.Params.cover.alt | default $.Title }}" loading="lazy" />
        {{ end }}
        <div class="card-content">
          <h2 class="card-title">{{ .Title }}</h2>
          <div class="card-meta">
            <time>{{ .Date.Format "Jan 2, 2006" }}</time>
          </div>
          <p class="card-summary">
            {{ with .Params.description }}{{ . }}{{ end }}
          </p>
          <span class="read-more">Read more â†’</span>
        </div>
      </a>
    </article>
  {{ end }}
</div>

<!-- Loading indicator - KEEP THIS, but remove id="loading" if you want (we use class in JS) -->
<div class="loading-indicator" id="loading">
  <div class="spinner"></div>
  <p>Loading more posts...</p>
</div>

<!-- Hidden pagination link for infinite scroll - KEEP THIS, but add id to the wrapper if needed -->
{{ if .Paginator.HasNext }}
  <div id="pagination-wrapper" style="display: none;">
    <a class="pagination__next" href="{{ .Paginator.Next.URL }}" id="next-page">Next</a>
  </div>
{{ end }}

<!-- REMOVE your entire <script> block and rely on the extend_footer.html init above. If you need custom tweaks, add them there. -->

{{ end }}